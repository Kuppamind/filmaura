<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FilmAura - Select Filters</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background-color: #000;
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5rem;
            font-weight: 700;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .genre-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .era-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }

        .filter-card {
            background: #1a1a1a;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
            border: 2px solid transparent;
        }

        .filter-card:hover {
            transform: translateY(-3px);
            background: #2a2a2a;
        }

        .filter-card.selected {
            border-color: #fff;
            background: #2a2a2a;
        }

        .continue-btn {
            display: block;
            width: 200px;
            margin: 40px auto;
            padding: 15px 30px;
            background: #fff;
            color: #000;
            border: none;
            border-radius: 25px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
        }

        .continue-btn:hover {
            transform: translateY(-3px);
            background: #f0f0f0;
        }

        @media (max-width: 768px) {
            .genre-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }

            .era-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }

            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Select Your Preferences</h1>
        
        <div class="section">
            <h2>Genres</h2>
            <div class="genre-grid">
                <div class="filter-card" data-genre-id="28">Action</div>
                <div class="filter-card" data-genre-id="35">Comedy</div>
                <div class="filter-card" data-genre-id="18">Drama</div>
                <div class="filter-card" data-genre-id="10749">Romance</div>
                <div class="filter-card" data-genre-id="27">Horror</div>
                <div class="filter-card" data-genre-id="878">Sci-Fi</div>
                <div class="filter-card" data-genre-id="99">Documentary</div>
                <div class="filter-card" data-genre-id="53">Thriller</div>
                <div class="filter-card" data-genre-id="16">Animation</div>
                <div class="filter-card" data-genre-id="9648">Mystery</div>
            </div>
        </div>

        <div class="section">
            <h2>Movie Era</h2>
            <div class="era-grid">
                <div class="filter-card" data-era="1940">1940s</div>
                <div class="filter-card" data-era="1950">1950s</div>
                <div class="filter-card" data-era="1960">1960s</div>
                <div class="filter-card" data-era="1970">1970s</div>
                <div class="filter-card" data-era="1980">1980s</div>
                <div class="filter-card" data-era="1990">1990s</div>
                <div class="filter-card" data-era="2000">2000s</div>
                <div class="filter-card" data-era="2010">2010s</div>
                <div class="filter-card" data-era="2020">2020s</div>
                <div class="filter-card" data-era="all">All Time</div>
            </div>
        </div>

        <button class="continue-btn">Find Movies</button>
    </div>

    <script>
        const TMDB_API_KEY = 'cca1147b183f0b7cf8f895178af7bf38';
        
        // Get the selected mood and genres from localStorage
        const selectedMood = localStorage.getItem('selectedMood');
        const selectedGenres = JSON.parse(localStorage.getItem('selectedGenres') || '[]');

        // Pre-select genres based on mood
        document.querySelectorAll('.filter-card[data-genre-id]').forEach(card => {
            const genreId = parseInt(card.dataset.genreId);
            if (selectedGenres.includes(genreId)) {
                card.classList.add('selected');
            }
        });

        // Handle genre selection
        document.querySelectorAll('.filter-card[data-genre-id]').forEach(card => {
            card.addEventListener('click', () => {
                card.classList.toggle('selected');
            });
        });

        // Handle era selection (only one can be selected)
        document.querySelectorAll('.filter-card[data-era]').forEach(card => {
            card.addEventListener('click', () => {
                // Remove selected class from all era cards
                document.querySelectorAll('.filter-card[data-era]').forEach(c => {
                    c.classList.remove('selected');
                });
                // Add selected class to clicked card
                card.classList.add('selected');
            });
        });

        // Handle continue button click
        document.querySelector('.continue-btn').addEventListener('click', async () => {
            // Get selected genres
            const selectedGenreIds = Array.from(document.querySelectorAll('.filter-card[data-genre-id].selected'))
                .map(card => parseInt(card.dataset.genreId));

            // Get selected era
            const selectedEraCard = document.querySelector('.filter-card[data-era].selected');
            const selectedEra = selectedEraCard ? selectedEraCard.dataset.era : 'all';

            // Store selections in localStorage
            localStorage.setItem('selectedGenreIds', JSON.stringify(selectedGenreIds));
            localStorage.setItem('selectedEra', selectedEra);

            // Navigate to results page
            window.location.href = 'results.html';
        });
    </script>
</body>
</html> 